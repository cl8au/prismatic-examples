category: ""
configPages:
  - elements:
      - type: configVar
        value: Google Cloud Storage Connection
      - type: configVar
        value: Google Cloud Storage - Bucket Name Variable
    name: Configuration
    tagline: ""
definitionVersion: 7
description: ""
documentation: ""
endpointType: flow_specific
flows:
  - description: ""
    isSynchronous: false
    name: Flow 1
    steps:
      - action:
          key: webhook
          component:
            isPublic: true
            key: webhook-triggers
            version: LATEST
        description: ""
        inputs:
          body:
            type: value
            value: ""
          contentType:
            type: value
            value: ""
          statusCode:
            type: value
            value: ""
        isTrigger: true
        name: Integration Trigger
      - action:
          key: listFiles
          component:
            isPublic: true
            key: google-cloud-storage
            version: LATEST
        description: ""
        inputs:
          bucketName:
            type: configVar
            value: Google Cloud Storage - Bucket Name Variable
          connection:
            type: configVar
            value: Google Cloud Storage Connection
          maxResults:
            type: value
            value: ""
          pageToken:
            type: value
            value: ""
          prefix:
            type: value
            value: unprocessed/
        name: List Files
      - action:
          key: loopOverItems
          component:
            isPublic: true
            key: loop
            version: LATEST
        description: ""
        inputs:
          items:
            type: reference
            value: listFiles.results
        name: Loop Over Items
        steps:
          - action:
              key: downloadFile
              component:
                isPublic: true
                key: google-cloud-storage
                version: LATEST
            description: ""
            inputs:
              bucketName:
                type: configVar
                value: Google Cloud Storage - Bucket Name Variable
              connection:
                type: configVar
                value: Google Cloud Storage Connection
              fileName:
                type: reference
                value: loopOverItems.currentItem
            name: Download File
          - action:
              key: createObject
              component:
                isPublic: true
                key: collection-tools
                version: LATEST
            description: ""
            inputs:
              keyValueInput:
                type: complex
                value:
                  - name: item_name
                    type: reference
                    value: downloadFile.results.item
                  - name: quantity
                    type: reference
                    value: downloadFile.results.qty
                  - name: cost
                    type: reference
                    value: downloadFile.results.price
            name: Create Object
          - action:
              key: httpPost
              component:
                isPublic: true
                key: http
                version: LATEST
            description: ""
            inputs:
              connection:
                type: configVar
                value: ""
              data:
                type: reference
                value: createObject.results
              debugRequest:
                type: value
                value: "false"
              includeFullResponse:
                type: value
                value: "false"
              maxRetries:
                type: value
                value: "0"
              responseType:
                type: value
                value: json
              retryDelayMS:
                type: value
                value: "0"
              retryOnAllErrors:
                type: value
                value: "false"
              timeout:
                type: value
                value: ""
              url:
                type: value
                value: "https://postman-echo.com/post"
              useExponentialBackoff:
                type: value
                value: "false"
            name: POST Request
          - action:
              key: replace
              component:
                isPublic: true
                key: text-manipulation
                version: LATEST
            description: ""
            inputs:
              find:
                type: value
                value: unprocessed
              replace:
                type: value
                value: processed
              text:
                type: reference
                value: loopOverItems.currentItem
            name: Find & Replace
          - action:
              key: moveFile
              component:
                isPublic: true
                key: google-cloud-storage
                version: LATEST
            description: ""
            inputs:
              connection:
                type: configVar
                value: Google Cloud Storage Connection
              destinationBucketName:
                type: configVar
                value: Google Cloud Storage - Bucket Name Variable
              destinationFileName:
                type: reference
                value: findReplace.results
              sourceBucketName:
                type: configVar
                value: Google Cloud Storage - Bucket Name Variable
              sourceFileName:
                type: reference
                value: loopOverItems.currentItem
            name: Move File
name: Loop Over Files Example
requiredConfigVars:
  - connection:
      key: privateKey
      component:
        isPublic: true
        key: google-cloud-storage
        version: LATEST
    dataType: connection
    inputs:
      clientEmail:
        type: value
        value: ""
      privateKey:
        type: value
        value: ""
      projectId:
        type: value
        value: ""
    key: Google Cloud Storage Connection
    orgOnly: false
  - dataType: string
    defaultValue: ""
    key: Google Cloud Storage - Bucket Name Variable
    orgOnly: false
